#!/usr/bin/env zsh
# vim: set ft=sh:
set -e

if [[ -n $AWS_VAULT ]] || [[ -n $VIMRUNTIME ]]; then
  exec "/opt/homebrew/bin/terraform" "$@"
fi

if [[ -z $AWS_PROFILE ]]; then
  exec "/opt/homebrew/bin/terraform" "$@"
fi

exec aws-vault exec "$AWS_PROFILE" -- "/opt/homebrew/bin/terraform" "$@"
